(()=>{"use strict";class e{constructor(e="unavailable",t="unknown",o=0,a=!1){this.title=e,this.author=t,this.numOfPages=o,this.readStatus=a}toggleRead(){this.readStatus=!this.readStatus}}class t{constructor(e,t,o,a,s){this.title=e,this.author=t,this.pages=o,this.read=a,this.index=s}render(){let e=document.createElement("div");return e.classList.add("book-card"),e.innerHTML=`\n      <p class="book-title">${this.title}</p>\n      <p class="book-author">${this.author}</p>\n      <p class="book-pages">Total Pages: ${o.formatLongNums(this.pages)}</p>\n      <p class="book-read">Has been read: ${this.read}</p>\n      <div>\n        <button class="inbook-btn inbook-read-btn" type="button" data-index="${this.index}">Read?</button>\n        <button class="inbook-btn inbook-remove-btn" type="button" data-index="${this.index}">Remove</button>\n      </div>\n    `,e}}class o{constructor(){this.myLibrary=[],this.bookShelf=document.querySelector(".books-wrapper"),this.handleBookAdd=this.handleBookAdd.bind(this)}addBookToLibrary(t,o,a,s){const r=new e(t,o,a,s);this.myLibrary.push(r),this.storeBooksToLocalStorage()}static formatLongNums(e){let t=String(e).split(""),o=[];for(;0!=t.length;){for(let e=0;e<3;e++)t&&o.push(t.pop());0!=t.length&&o.push(",")}return o.reverse().join("")}populateShelf(){this.bookShelf.innerHTML="";let e=0;this.myLibrary.forEach((o=>{let a=new t(o.title,o.author,o.numOfPages,o.readStatus,e);this.bookShelf.appendChild(a.render()),e++}));let o=document.querySelectorAll(".inbook-remove-btn");o&&o.forEach((e=>e.addEventListener("click",(()=>{this.handleBookRemove(e)}))));let a=document.querySelectorAll(".inbook-read-btn");a&&a.forEach((e=>e.addEventListener("click",(()=>{this.handleReadUpdate(e)}))))}storeBooksToLocalStorage(){let e=[];this.myLibrary.forEach((t=>{const o={title:t.title,author:t.author,numOfPages:t.numOfPages,readStatus:t.readStatus};e.push(o)})),localStorage.setItem("booklist",JSON.stringify(e))}getFromLocalStorage(){let e=localStorage.getItem("booklist");null==e?this.myLibrary=[]:JSON.parse(e).forEach((e=>{let{title:t,author:o,numOfPages:a,readStatus:s}=e;this.addBookToLibrary(t,o,a,s)}))}handleBookRemove(e){this.myLibrary.splice(parseInt(e.dataset.index),1),this.populateShelf(),this.storeBooksToLocalStorage()}handleBookAdd(){const e=document.querySelector("#book-title-input"),t=document.querySelector("#book-author-input"),o=document.querySelector("#book-pages-input"),a=document.querySelector("#book-read-input"),s=e.value,r=t.value,i=o.valueAsNumber,n=a.checked;this.addBookToLibrary(s,r,i,n),e.value="",t.value="",o.value="",a.checked=!1,this.populateShelf()}handleReadUpdate(e){this.myLibrary[parseInt(e.dataset.index)].toggleRead(),this.populateShelf(),this.storeBooksToLocalStorage()}}console.log("im in...");const a=new o;a.getFromLocalStorage(),a.populateShelf();const s=document.querySelector("#add-book-form");document.querySelector("#new-book").addEventListener("click",(()=>{s.style.top=`${window.visualViewport.height/2+window.scrollY}px`,s.classList.remove("hide")})),document.querySelector("#cancel-book-btn").addEventListener("click",(()=>s.classList.add("hide"))),document.querySelector("#add-book-btn").addEventListener("click",(()=>{a.handleBookAdd(),s.classList.add("hide")}))})();
//# sourceMappingURL=main.js.map